@model Alnet.AudioServer.Web.Models.PlayerFullInfoModel

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<script type="text/javascript">
    $(document).ready(function () {
        $("#btnPlay").bind("click", function (event, ui) {
            $.ajax("/Player/Play/@Model.PlayerId");
        });

        $("#btnNextSound").bind("click", function(event, ui) {
            $.ajax("/Player/MoveNextSound/@Model.PlayerId");
        });

        $("#btnPrevSound").bind("click", function (event, ui) {
            $.ajax("/Player/MovePrevSound/@Model.PlayerId");
        });

        $("input.chkChannel").bind("change", function (event, ui) {
            var channelIndex = $(this).attr("id");
            var newIsChannelEnabled = $(this).is(":checked");
            if (newIsChannelEnabled) {
                $.ajax("/Player/EnableChannel/@Model.PlayerId/" + channelIndex);
            } else {
                $.ajax("/Player/DisableChannel/@Model.PlayerId/" + channelIndex);
            }
        });
    });
</script>

<div id="a_playback">
    <div id="a_title">
        <span>@Model.Playback.SoundName</span>
    </div>
    <div id="a_timeline">
        <input type="range" name="a-timeline" id="a-timeline" min="0" max="100" value="50" data-mini="true" data-highlight="true">
    </div>
</div>
<div id="a_controls">
    <div class="ui-grid-c">
        <div class="ui-block-a"><input id="btnPlay" name="btnPlay" type="button" value="Play" /></div>
        <div class="ui-block-b"><input id="btnPrevSound" name="btnPrevSound" type="button" value="<" /></div>
        <div class="ui-block-c"><input id="btnNextSound" name="btnNextSound" type="button" value=">" /></div>
        <div class="ui-block-d"><a href="#popupVolume" data-role="button" data-rel="popup">Volume</a></div>
    </div>
</div>
<div id="popupVolume" data-role="popup">
    <form>
        <fieldset data-role="controlgroup" data-iconpos="left">
            @for (int channelIndex = 0; channelIndex < Model.Channels.Count; channelIndex++)
            {
                var channel = Model.Channels[channelIndex];
                @Html.Label(channelIndex.ToString(), channel.Name, new { @for = channelIndex.ToString() });
                @Html.CheckBox(channelIndex.ToString(), channel.IsEnabled, new { id = channelIndex, @class = "chkChannel" });
            }
        </fieldset>
    </form>
</div>
<div data-role="collapsible" data-inset="false">
    <h3>Список воспроизведения</h3>
    <form>
        <ul data-role="listview" data-inset="true">
            @for (int soundIndex = 0; soundIndex < Model.Sounds.Count; soundIndex++)
            {
                string soundName = Model.Sounds[soundIndex];
                <li>@soundName</li>
            }
        </ul>
    </form>
</div>




